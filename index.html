<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ICF Core Competencies ‚Äî Self Assessment</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --blue-deep:   #0a0f2e;
      --blue-mid:    #111a4d;
      --blue-card:   #151d52;
      --blue-border: rgba(120,140,255,.15);
      --gold:        #fbbf24;
      --gold-glow:   rgba(251,191,36,.18);
      --teal:        #2dd4bf;
      --teal-soft:   rgba(45,212,191,.12);
      --text:        #e8ecff;
      --muted:       #8b96cc;
      --ok:          #34d399;
      --bad:         #f87171;
      --font-h:     'Playfair Display', Georgia, serif;
      --font-b:     'Plus Jakarta Sans', system-ui, sans-serif;
      --radius:      16px;
      --safe-bottom: env(safe-area-inset-bottom, 0px);
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    html {
      height: 100%;
      height: 100dvh;
      overflow: hidden;
      background-color: #0a0f2e;
      background-image:
        radial-gradient(ellipse 80vw 50vh at 0% 0%,   rgba(99,102,241,.22) 0%, transparent 70%),
        radial-gradient(ellipse 60vw 40vh at 100% 80%, rgba(251,191,36,.13) 0%, transparent 70%),
        radial-gradient(ellipse 50vw 60vh at 80%  20%, rgba(45,212,191,.09) 0%, transparent 60%);
      background-attachment: fixed;
    }

    body {
      height: 100%;
      height: 100dvh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      background: transparent;
      color: var(--text);
      font-family: var(--font-b);
      -webkit-font-smoothing: antialiased;
    }

    /* ‚îÄ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ‚îÄ */
    header {
      position: sticky;
      top: 0;
      z-index: 20;
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      background: rgba(10,15,46,.75);
      border-bottom: 1px solid var(--blue-border);
      padding: 10px 16px;
      flex-shrink: 0;
    }

    .h-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 8px;
    }

    .h-logo {
      font-family: var(--font-h);
      font-size: 15px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--gold), var(--teal));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1.1;
    }

    .h-stats {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .stat-chip {
      font-size: 11px;
      font-weight: 700;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid var(--blue-border);
      white-space: nowrap;
    }
    .stat-chip.ok-chip  { color: var(--ok); }
    .stat-chip.bad-chip { color: var(--bad); }
    .stat-chip.pct-chip { color: var(--gold); }

    .progress-track {
      height: 4px;
      border-radius: 999px;
      background: rgba(255,255,255,.1);
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--teal), var(--gold));
      border-radius: 999px;
      transition: width .4s cubic-bezier(.4,0,.2,1);
    }

    /* ‚îÄ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ‚îÄ */
    main {
      flex: 1;
      min-height: 0;
      display: flex;
      flex-direction: column;
      padding: 16px;
      gap: 14px;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }

    /* ‚îÄ‚îÄ‚îÄ WELCOME ‚îÄ‚îÄ‚îÄ */
    .welcome-screen {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      gap: 20px;
      padding: 24px 0 8px;
    }

    .welcome-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 14px;
      border-radius: 999px;
      border: 1px solid rgba(251,191,36,.35);
      background: var(--gold-glow);
      font-size: 12px;
      font-weight: 700;
      color: var(--gold);
      letter-spacing: .5px;
    }

    .welcome-title {
      font-family: var(--font-h);
      font-size: clamp(28px, 8vw, 44px);
      line-height: 1.1;
      background: linear-gradient(135deg, #fff 30%, var(--teal));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .welcome-text {
      font-size: 14px;
      line-height: 1.7;
      color: var(--muted);
      max-width: 440px;
      text-align: left;
    }

    .welcome-text li {
      margin-bottom: 6px;
      list-style: none;
      padding-left: 20px;
      position: relative;
    }
    .welcome-text li::before {
      content: '‚Üí';
      position: absolute;
      left: 0;
      color: var(--teal);
      font-weight: 700;
    }

    .info-row {
      display: flex;
      gap: 8px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .info-pill {
      padding: 8px 14px;
      border-radius: var(--radius);
      background: rgba(255,255,255,.04);
      border: 1px solid var(--blue-border);
      font-size: 12px;
      font-weight: 600;
      color: var(--muted);
    }
    .info-pill strong { color: var(--text); display: block; font-size: 18px; }

    .credit {
      font-size: 11px;
      color: var(--muted);
      opacity: .7;
    }
    .credit a { color: var(--teal); text-decoration: none; }

    /* ‚îÄ‚îÄ‚îÄ CARD ‚îÄ‚îÄ‚îÄ */
    .card {
      background: linear-gradient(160deg, rgba(21,29,82,.9), rgba(10,15,46,.95));
      border: 1px solid var(--blue-border);
      border-radius: var(--radius);
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 14px;
      box-shadow: 0 24px 60px rgba(0,0,0,.35);
    }

    .q-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .q-num {
      font-size: 11px;
      font-weight: 700;
      letter-spacing: .8px;
      text-transform: uppercase;
      color: var(--teal);
    }
    .q-count {
      font-size: 11px;
      color: var(--muted);
      font-weight: 600;
    }

    .q-label {
      font-size: 12px;
      font-weight: 600;
      color: var(--muted);
      letter-spacing: .3px;
    }

    .q-text {
      font-family: var(--font-h);
      font-size: clamp(15px, 4.5vw, 20px);
      line-height: 1.35;
      color: var(--text);
      padding: 12px;
      background: rgba(255,255,255,.03);
      border-radius: 10px;
      border-left: 3px solid var(--teal);
    }

    /* ‚îÄ‚îÄ‚îÄ OPTIONS ‚îÄ‚îÄ‚îÄ */
    #options {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .btn {
      text-align: left;
      padding: 13px 14px;
      border-radius: 12px;
      border: 1px solid var(--blue-border);
      background: rgba(255,255,255,.04);
      color: var(--text);
      font-family: var(--font-b);
      font-size: 13.5px;
      font-weight: 500;
      line-height: 1.35;
      cursor: pointer;
      transition: all .18s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      -webkit-tap-highlight-color: transparent;
    }

    .btn-letter {
      flex-shrink: 0;
      width: 24px;
      height: 24px;
      border-radius: 6px;
      background: rgba(255,255,255,.08);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 800;
      color: var(--muted);
    }

    .btn:active { transform: scale(.98); }

    .btn.correct {
      border-color: rgba(52,211,153,.5);
      background: linear-gradient(135deg, rgba(52,211,153,.18), rgba(52,211,153,.06));
      font-weight: 700;
    }
    .btn.correct .btn-letter { background: var(--ok); color: #000; }

    .btn.wrong {
      border-color: rgba(248,113,113,.5);
      background: linear-gradient(135deg, rgba(248,113,113,.18), rgba(248,113,113,.06));
      font-weight: 700;
    }
    .btn.wrong .btn-letter { background: var(--bad); color: #000; }

    .btn.disabled { pointer-events: none; opacity: .9; }

    /* ‚îÄ‚îÄ‚îÄ BOTTOM BAR ‚îÄ‚îÄ‚îÄ */
    .bottom-bar {
      position: sticky;
      bottom: 0;
      z-index: 20;
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      background: rgba(10,15,46,.85);
      border-top: 1px solid var(--blue-border);
      padding: 10px 16px calc(10px + var(--safe-bottom));
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      flex-shrink: 0;
    }

    .bottom-label {
      font-size: 11px;
      font-weight: 700;
      color: var(--muted);
    }
    .bottom-label span {
      display: block;
      font-size: 13px;
      color: var(--text);
    }

    .btn-group { display: flex; gap: 8px; }

    .action {
      padding: 11px 20px;
      border-radius: 12px;
      border: 0;
      font-family: var(--font-b);
      font-size: 13px;
      font-weight: 800;
      letter-spacing: .4px;
      cursor: pointer;
      transition: all .18s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .action:active { transform: scale(.96); }

    .action.primary {
      background: linear-gradient(135deg, var(--teal), #059669);
      color: #fff;
      box-shadow: 0 6px 20px rgba(45,212,191,.3);
    }
    .action.primary:disabled {
      opacity: .4;
      box-shadow: none;
    }

    .action.gold {
      background: linear-gradient(135deg, var(--gold), #f59e0b);
      color: #000;
      box-shadow: 0 6px 20px rgba(251,191,36,.25);
    }

    .action.ghost {
      background: rgba(255,255,255,.06);
      border: 1px solid var(--blue-border);
      color: var(--muted);
    }

    /* ‚îÄ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ‚îÄ */
    #resultModal {
      display: none;
      position: fixed;
      inset: 0;
      z-index: 100;
      background: rgba(5,8,28,.85);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      align-items: flex-end;
      justify-content: center;
      padding: 0;
    }
    #resultModal.show { display: flex; }

    .modal-panel {
      width: 100%;
      max-width: 600px;
      max-height: 90dvh;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      background: linear-gradient(180deg, #131b55, #0d1240);
      border: 1px solid var(--blue-border);
      border-radius: 24px 24px 0 0;
      padding: 20px 16px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      animation: slideUp .35s cubic-bezier(.4,0,.2,1);
    }

    @media (min-width: 600px) {
      #resultModal { align-items: center; padding: 16px; }
      .modal-panel { border-radius: 24px; max-height: 88vh; }
    }

    @keyframes slideUp {
      from { transform: translateY(40px); opacity: 0; }
      to   { transform: translateY(0);    opacity: 1; }
    }

    .modal-handle {
      width: 40px;
      height: 4px;
      border-radius: 999px;
      background: rgba(255,255,255,.15);
      margin: 0 auto -4px;
      flex-shrink: 0;
    }
    @media (min-width: 600px) { .modal-handle { display: none; } }

    .result-title {
      font-family: var(--font-h);
      font-size: clamp(17px, 5vw, 22px);
      text-align: center;
      line-height: 1.3;
    }

    .score-big { text-align: center; }
    .score-pct {
      font-size: clamp(48px, 14vw, 72px);
      font-weight: 800;
      font-family: var(--font-h);
      background: linear-gradient(135deg, var(--gold), var(--teal));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1;
    }
    .score-sub {
      font-size: 13px;
      color: var(--muted);
      margin-top: 4px;
    }

    .panel-card {
      background: rgba(255,255,255,.04);
      border: 1px solid var(--blue-border);
      border-radius: var(--radius);
      padding: 14px;
    }
    .panel-card h3 {
      font-family: var(--font-b);
      font-size: 13px;
      font-weight: 700;
      letter-spacing: .3px;
      color: var(--muted);
      text-transform: uppercase;
      margin-bottom: 12px;
    }

    .bar-row {
      display: grid;
      grid-template-columns: 1fr 44px;
      gap: 8px;
      align-items: center;
      padding: 7px 0;
      border-top: 1px solid rgba(255,255,255,.06);
    }
    .bar-row:first-of-type { border-top: 0; }
    .bar-label { font-size: 12px; color: var(--muted); margin-bottom: 5px; }
    .bar-track { height: 7px; border-radius: 999px; background: rgba(255,255,255,.08); overflow: hidden; }
    .bar-fill { height: 100%; width: 0; background: linear-gradient(90deg, var(--teal), var(--gold)); border-radius: 999px; transition: width .7s ease; }
    .bar-pct { font-size: 13px; font-weight: 800; text-align: right; }

    .summary-section { font-size: 13px; line-height: 1.6; color: var(--muted); }
    .summary-section b { color: var(--text); }
    .summary-section ul { margin: 6px 0 0 0; padding: 0; list-style: none; }
    .summary-section li { padding: 3px 0; }
    .summary-section li::before { content: '‚Ä¢ '; color: var(--teal); }

    .modal-actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .modal-actions .action { flex: 1; text-align: center; min-width: 110px; }

    /* ‚îÄ‚îÄ‚îÄ DESKTOP ‚îÄ‚îÄ‚îÄ */
    @media (min-width: 768px) {
      main { padding: 28px 40px; max-width: 860px; margin: 0 auto; width: 100%; }

      .h-logo { font-size: 17px; }
      .stat-chip { font-size: 13px; padding: 5px 14px; }

      .welcome-screen { gap: 26px; padding-top: 40px; }
      .welcome-badge { font-size: 14px; padding: 8px 22px; }
      .welcome-title { font-size: clamp(42px, 5vw, 58px); }
      .welcome-text { font-size: 16px; }
      .welcome-text li { margin-bottom: 10px; }
      .info-pill { font-size: 14px; padding: 12px 24px; }
      .info-pill strong { font-size: 26px; }
      .credit { font-size: 14px; }

      .card { padding: 30px; gap: 22px; border-radius: 20px; }
      .q-num, .q-count { font-size: 14px; }
      .q-label { font-size: 14px; }
      .q-text { font-size: clamp(19px, 2vw, 24px); padding: 20px; border-radius: 14px; line-height: 1.45; }

      #options { gap: 12px; }
      .btn { font-size: 16px; padding: 16px 20px; border-radius: 14px; gap: 14px; }
      .btn-letter { width: 32px; height: 32px; font-size: 13px; border-radius: 8px; }

      .bottom-bar { padding: 14px 40px; }
      .bottom-label { font-size: 13px; }
      .bottom-label span { font-size: 15px; }
      .action { font-size: 15px; padding: 13px 30px; border-radius: 14px; }

      .modal-panel { max-width: 680px; padding: 28px 26px; gap: 20px; }
      .result-title { font-size: clamp(20px, 2.5vw, 28px); }
      .score-pct { font-size: clamp(64px, 8vw, 96px); }
      .score-sub { font-size: 15px; }
      .panel-card { padding: 20px; }
      .panel-card h3 { font-size: 14px; margin-bottom: 16px; }
      .bar-label { font-size: 14px; }
      .bar-pct { font-size: 15px; }
      .summary-section { font-size: 15px; line-height: 1.7; }
    }

    @media (min-width: 1100px) {
      main { max-width: 960px; }
      .q-text { font-size: clamp(21px, 1.8vw, 26px); }
      .btn { font-size: 17px; }
    }


    /* PDF button ‚Äî desktop only */
    #pdfBtn { display: none; }
    @media (min-width: 768px) { #pdfBtn { display: inline-flex; } }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  </head>
<body>

  <!-- HEADER -->
  <header>
    <div class="h-top">
      <div class="h-logo">Self Assessment ICF Core Competencies</div>
      <div class="h-stats">
        <div class="stat-chip ok-chip">‚úÖ <span id="good">0</span></div>
        <div class="stat-chip bad-chip">‚ùå <span id="bad">0</span></div>
        <div class="stat-chip pct-chip"><span id="pct">0%</span></div>
      </div>
    </div>
    <div class="progress-track"><div class="progress-fill" id="prog"></div></div>
  </header>

  <!-- MAIN -->
  <main id="mainContent"></main>

  <!-- BOTTOM BAR -->
  <div class="bottom-bar">
    <div class="bottom-label">
      Target
      <span>‚â• 80% ‚úì</span>
    </div>
    <div class="btn-group">
      <button class="action ghost" id="finishBtn" style="display:none">Finish</button>
      <button class="action primary" id="nextBtn" style="display:none" disabled>Next ‚Üí</button>
    </div>
  </div>

  <!-- MODAL RESULTS -->
  <section id="resultModal">
    <div class="modal-panel">
      <div class="modal-handle"></div>

      <div class="score-big">
        <div class="score-pct" id="scorePct">0%</div>
        <div class="score-sub" id="resultScore"></div>
      </div>

      <div class="result-title" id="resultTitle"></div>

      <div class="panel-card">
        <h3>üìä By Core Competency</h3>
        <div id="coreBars"></div>
      </div>

      <div class="panel-card">
        <h3>üìå Summary</h3>
        <div id="summaryBox" class="summary-section"></div>
      </div>

      <div class="modal-actions">
        <button class="action ghost"   id="restartBtn">Restart</button>
        <button class="action primary" id="pdfBtn">‚¨á Download PDF</button>
        <button class="action gold"    id="closeBtn">Close</button>
      </div>
    </div>
  </section>

  <script>
  (function(){
    const CORE = [
      "Demonstrates Ethical Practice",
      "Embodies a Coaching Mindset",
      "Establishes and Maintains Agreements",
      "Cultivates Trust and Safety",
      "Maintains Presence",
      "Listens Actively",
      "Evokes Awareness",
      "Facilitates Client Growth"
    ];

    const SUB = [
      ["Demonstrates personal integrity and honesty in interactions with clients, sponsors, and relevant stakeholders.","Demonstrates Ethical Practice"],
      ["Is sensitive to client's identity, environment, experiences, values, and beliefs.","Demonstrates Ethical Practice"],
      ["Uses language that is appropriate and respectful to clients, sponsors, and relevant stakeholders.","Demonstrates Ethical Practice"],
      ["Abides by the ICF Code of Ethics and upholds the ICF Core Values.","Demonstrates Ethical Practice"],
      ["Maintains confidentiality of client information per stakeholder agreements and pertinent laws.","Demonstrates Ethical Practice"],
      ["Maintains the distinctions between coaching, consulting, psychotherapy, and other support professions.","Demonstrates Ethical Practice"],
      ["Refers clients to other support professionals, as appropriate.","Demonstrates Ethical Practice"],
      ["Acknowledges that clients are responsible for their own choices.","Embodies a Coaching Mindset"],
      ["Engages in ongoing learning and development as a coach, including remaining aware of current coaching best practices and the use of technology.","Embodies a Coaching Mindset"],
      ["Develops an ongoing reflective practice to enhance one's coaching.","Embodies a Coaching Mindset"],
      ["Remains aware of and open to the influence of biases, context, and culture on self and others.","Embodies a Coaching Mindset"],
      ["Uses awareness of self and one's intuition to benefit clients.","Embodies a Coaching Mindset"],
      ["Develops and maintains the ability to manage one's emotions.","Embodies a Coaching Mindset"],
      ["Maintains emotional, physical, and mental well-being in preparation for, throughout, and following each session.","Embodies a Coaching Mindset"],
      ["Seeks help from outside sources when necessary.","Embodies a Coaching Mindset"],
      ["Nurtures openness and curiosity in oneself, the client, and the coaching process.","Embodies a Coaching Mindset"],
      ["Remains aware of the influence of one's thoughts and behaviors on the client and others.","Embodies a Coaching Mindset"],
      ["Describes one's coaching philosophy and clearly defines what coaching is and is not for potential clients and stakeholders.","Establishes and Maintains Agreements"],
      ["Reaches agreement about what is and is not appropriate in the relationship, what is and is not being offered, and the responsibilities of the client and relevant stakeholders, including commitment to working toward coaching goals.","Establishes and Maintains Agreements"],
      ["Reaches agreement about the guidelines and specific parameters of the coaching relationship such as logistics, fees, scheduling, duration, termination, confidentiality, and inclusion of others.","Establishes and Maintains Agreements"],
      ["Partners with the client and relevant stakeholders to establish an overall coaching plan and goals.","Establishes and Maintains Agreements"],
      ["Partners with the client to determine client-coach compatibility.","Establishes and Maintains Agreements"],
      ["Partners with the client to identify or reconfirm what they want to accomplish in the session.","Establishes and Maintains Agreements"],
      ["Partners with the client to define what the client believes they need to address or resolve to achieve what they want to accomplish in the session.","Establishes and Maintains Agreements"],
      ["Partners with the client to define or reconfirm measures of success for what the client wants to accomplish in the coaching engagement or individual session.","Establishes and Maintains Agreements"],
      ["Partners with the client to manage the time and focus of the session.","Establishes and Maintains Agreements"],
      ["Continues coaching in the direction of the client's desired outcome unless the client indicates otherwise.","Establishes and Maintains Agreements"],
      ["Partners with the client to close the coaching relationship in a way that respects the client and the coaching experience.","Establishes and Maintains Agreements"],
      ["Revisits the coaching agreement when necessary to ensure the coaching approach is meeting the client's needs.","Establishes and Maintains Agreements"],
      ["Seeks to understand the client within their context, which may include their identity, environment, experiences, values, and beliefs.","Cultivates Trust and Safety"],
      ["Demonstrates respect for the client's identity, perceptions, style, and language, and adapts one's coaching to the client.","Cultivates Trust and Safety"],
      ["Acknowledges and respects the client's unique talents, insights, and work in the coaching process.","Cultivates Trust and Safety"],
      ["Shows support, empathy, and concern for the client.","Cultivates Trust and Safety"],
      ["Acknowledges and supports the client's expression of feelings, perceptions, concerns, beliefs, and suggestions.","Cultivates Trust and Safety"],
      ["Demonstrates openness and transparency as a way to display vulnerability and build trust with the client.","Cultivates Trust and Safety"],
      ["Remains focused, observant, empathetic, and responsive to the client.","Maintains Presence"],
      ["Demonstrates curiosity during the coaching process.","Maintains Presence"],
      ["Remains aware of what is emerging for self and client in the present moment.","Maintains Presence"],
      ["Manages one's emotions to stay present with the client.","Maintains Presence"],
      ["Demonstrates confidence in working with strong client emotions during the coaching process.","Maintains Presence"],
      ["Is comfortable working in a space of not knowing.","Maintains Presence"],
      ["Creates or allows space for silence, pause, or reflection.","Maintains Presence"],
      ["Considers the client's context, identity, environment, experiences, values, and beliefs to enhance understanding of what the client is communicating.","Listens Actively"],
      ["Reflects or summarizes what the client is communicating to ensure clarity and understanding.","Listens Actively"],
      ["Recognizes and inquires when there is more to what the client is communicating.","Listens Actively"],
      ["Notices, acknowledges, and explores the client's emotions, energy shifts, non-verbal cues, or other behaviors.","Listens Actively"],
      ["Integrates the client's words, tone of voice, and body language to determine the full meaning of what the client is communicating.","Listens Actively"],
      ["Notices trends in the client's behaviors and emotions across sessions to discern themes and patterns.","Listens Actively"],
      ["Considers the client's experience when deciding what might be most useful.","Evokes Awareness"],
      ["Challenges the client as a way to evoke awareness or insight.","Evokes Awareness"],
      ["Asks questions about the client, such as their way of thinking, values, needs, wants, and beliefs.","Evokes Awareness"],
      ["Asks questions that help the client explore beyond current thinking.","Evokes Awareness"],
      ["Invites the client to share more about their experience in the moment.","Evokes Awareness"],
      ["Notices what is working to enhance client progress.","Evokes Awareness"],
      ["Adjusts the coaching approach in response to the client's needs.","Evokes Awareness"],
      ["Helps the client identify factors that influence current and future patterns of behavior, thinking, or emotion.","Evokes Awareness"],
      ["Invites the client to generate ideas about how they can move forward and what they are willing or able to do.","Evokes Awareness"],
      ["Supports the client in reframing perspectives.","Evokes Awareness"],
      ["Shares observations, knowledge, and feelings, without attachment, that have the potential to create new insights for the client.","Evokes Awareness"],
      ["Works with the client to integrate new awareness, insight, or learning into their worldview and behaviors.","Facilitates Client Growth"],
      ["Partners with the client to design goals, actions, and accountability measures that integrate and expand new learning.","Facilitates Client Growth"],
      ["Acknowledges and supports client autonomy in the design of goals, actions, and methods of accountability.","Facilitates Client Growth"],
      ["Supports the client in identifying potential results or learning from identified action steps.","Facilitates Client Growth"],
      ["Invites the client to consider how to move forward, including resources, support, and potential barriers.","Facilitates Client Growth"],
      ["Partners with the client to summarize learning and insight within or between sessions.","Facilitates Client Growth"],
      ["Partners with the client to integrate learning and sustain progress throughout the coaching engagement.","Facilitates Client Growth"],
      ["Acknowledges the client's progress and successes.","Facilitates Client Growth"],
      ["Partners with the client to close the session.","Facilitates Client Growth"]
    ];

    const LETTERS = ['A','B','C','D','E','F','G','H'];
    const shuffle = arr => { const a=arr.slice(); for(let i=a.length-1;i>0;i--){ const j=(Math.random()*(i+1))|0; [a[i],a[j]]=[a[j],a[i]]; } return a; };

    const $ = id => document.getElementById(id);
    const main      = $('mainContent');
    const nextBtn   = $('nextBtn');
    const finishBtn = $('finishBtn');
    const modal     = $('resultModal');
    const goodEl    = $('good');
    const badEl     = $('bad');
    const pctEl     = $('pct');
    const progEl    = $('prog');

    let QUESTIONS, idx, good, bad, answered, locked, welcome;
    let coreTotals = {}, coreGoods = {};

    function initCoreStats(){
      coreTotals = {}; coreGoods = {};
      CORE.forEach(c => { coreTotals[c] = 0; coreGoods[c] = 0; });
    }

    function makeQuestions(){
      return shuffle(SUB.slice()).map(([sub, core]) => {
        const options = shuffle(CORE.slice());
        return { sub, core, options, correct: options.indexOf(core) };
      });
    }

    function updateHUD(){
      const pct = answered ? Math.round((good / answered) * 100) : 0;
      goodEl.textContent = good;
      badEl.textContent  = bad;
      pctEl.textContent  = pct + '%';
      progEl.style.width = Math.round((answered / QUESTIONS.length) * 100) + '%';
    }

    // ‚îÄ‚îÄ WELCOME ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function renderWelcome(){
      nextBtn.style.display   = 'none';
      finishBtn.style.display = 'none';

      main.innerHTML = `
        <div class="welcome-screen">
          <div class="welcome-badge">‚ú¶ Self Assessment ICF Core Competencies ‚ú¶</div>
          <h1 class="welcome-title">Welcome!</h1>
          <ul class="welcome-text">
            <li>You will answer <strong>68 questions</strong> on the ICF Core Competencies</li>
            <li>For each question, select the Core Competency the sub-competency belongs to</li>
            <li>You pass the quiz with at least <strong>80%</strong> correct answers</li>
            <li>At the end you will receive a detailed summary by competency</li>
          </ul>
          <div class="info-row">
            <div class="info-pill"><strong>68</strong> Questions</div>
            <div class="info-pill"><strong>8</strong> Competencies</div>
            <div class="info-pill"><strong>80%</strong> Pass mark</div>
          </div>
          <button class="action gold" id="startBtn" style="padding:15px 40px;font-size:15px;border-radius:14px">
            START QUIZ ‚Üí
          </button>
          <div class="credit">
            Created by Tito Bertasi ¬∑
            <a href="https://www.linkedin.com/in/titobertasi1980/" target="_blank" rel="noopener">LinkedIn</a>
          </div>
        </div>`;

      $('startBtn').addEventListener('click', () => {
        welcome = false;
        nextBtn.style.display   = '';
        finishBtn.style.display = '';
        nextBtn.textContent = 'Next ‚Üí';
        renderQuestion();
      }, { once: true });
    }

    // ‚îÄ‚îÄ QUESTION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function renderQuestion(){
      if(welcome){ renderWelcome(); return; }

      locked = false;
      nextBtn.disabled = true;

      const q = QUESTIONS[idx];

      main.innerHTML = `
        <div class="card">
          <div class="q-meta">
            <div class="q-num">Question ${idx + 1}</div>
            <div class="q-count">${idx + 1} / ${QUESTIONS.length}</div>
          </div>
          <div class="q-label">Which ICF Core Competency does this sub-competency belong to?</div>
          <div class="q-text">${q.sub}</div>
          <div id="options"></div>
        </div>`;

      if(idx === QUESTIONS.length - 1) nextBtn.textContent = 'View Results üèÅ';
      else nextBtn.textContent = 'Next ‚Üí';

      const optsBox = $('options');
      q.options.forEach((opt, i) => {
        const btn = document.createElement('button');
        btn.className = 'btn';
        btn.dataset.i = i;
        btn.innerHTML = `<span class="btn-letter">${LETTERS[i]}</span>${opt}`;
        btn.addEventListener('click', () => {
          if(locked) return;
          locked = true;
          coreTotals[q.core]++;
          const all = optsBox.querySelectorAll('.btn');
          all.forEach(x => x.classList.add('disabled'));
          if(i === q.correct){
            btn.classList.add('correct');
            good++; coreGoods[q.core]++;
          } else {
            btn.classList.add('wrong'); bad++;
            all.forEach(x => { if(+x.dataset.i === q.correct) x.classList.add('correct'); });
          }
          answered++; updateHUD(); nextBtn.disabled = false;
        });
        optsBox.appendChild(btn);
      });
    }

    // ‚îÄ‚îÄ FINISH ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function buildBars(){
      const el = $('coreBars');
      el.innerHTML = '';
      CORE.forEach(core => {
        const tot = coreTotals[core] || 0;
        const ok  = coreGoods[core] || 0;
        const pct = tot ? Math.round((ok / tot) * 100) : 0;
        const row = document.createElement('div');
        row.className = 'bar-row';
        row.innerHTML = `
          <div>
            <div class="bar-label">${core}</div>
            <div class="bar-track"><div class="bar-fill" style="width:0%" data-pct="${pct}"></div></div>
          </div>
          <div class="bar-pct">${pct}%</div>`;
        el.appendChild(row);
      });
      requestAnimationFrame(() => {
        document.querySelectorAll('.bar-fill').forEach(f => { f.style.width = f.dataset.pct + '%'; });
      });
    }

    function finish(){
      const total  = QUESTIONS.length;
      const pct    = Math.round((good / total) * 100);
      const passed = pct >= 80;

      $('scorePct').textContent    = pct + '%';
      $('resultScore').textContent = `Correct: ${good} ¬∑ Incorrect: ${bad} ¬∑ Total: ${total}`;
      $('resultTitle').textContent = passed
        ? 'üòé Congratulations, you passed!'
        : 'üò¢ Not quite there ‚Äî try again!';

      const stats = CORE.map(c => {
        const tot = coreTotals[c] || 0;
        const ok  = coreGoods[c]  || 0;
        return { c, pct: tot ? (ok / tot * 100) : 0 };
      }).sort((a, b) => b.pct - a.pct);

      const strengths = stats.filter(x => x.pct >= 80);
      const toImprove = stats.filter(x => x.pct < 80).sort((a, b) => a.pct - b.pct);

      $('summaryBox').innerHTML = `
        <div><b>Target ‚â• 80%:</b> ${passed ? 'achieved ‚úÖ' : 'not achieved ‚ùå'}</div>
        ${strengths.length ? `<div style="margin-top:10px"><b>Strengths (‚â• 80%):</b>
          <ul>${strengths.map(x => `<li>${x.c} (${Math.round(x.pct)}%)</li>`).join('')}</ul></div>` : ''}
        ${toImprove.length ? `<div style="margin-top:10px"><b>To strengthen (&lt; 80%):</b>
          <ul>${toImprove.map(x => `<li>${x.c} (${Math.round(x.pct)}%)</li>`).join('')}</ul></div>` : ''}
        <div style="margin-top:10px;opacity:.7">üí° Keep practising until all competencies stay consistently ‚â• 80%.</div>`;

      buildBars();
      modal.classList.add('show');
    }

    // ‚îÄ‚îÄ PDF ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function downloadPDF(){
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF({ orientation: 'portrait', unit: 'mm', format: 'a4' });
      const W = doc.internal.pageSize.getWidth();
      const H = doc.internal.pageSize.getHeight();
      const mg = 16;
      const col = W - mg * 2;

      doc.setFillColor(10,15,46);
      doc.rect(0,0,W,H,'F');

      doc.setFillColor(17,26,77);
      doc.rect(0,0,W,30,'F');
      doc.setDrawColor(45,212,191);
      doc.setLineWidth(0.8);
      doc.line(0,30,W,30);

      doc.setFont('helvetica','bold');
      doc.setFontSize(7.5);
      doc.setTextColor(139,150,204);
      doc.text('SELF ASSESSMENT - ICF CORE COMPETENCIES', mg, 10);
      doc.setFontSize(13);
      doc.setTextColor(232,236,255);
      doc.text('Quiz Results', mg, 22);
      const dateStr = new Date().toLocaleDateString('en-GB',{day:'2-digit',month:'long',year:'numeric'});
      doc.setFont('helvetica','normal');
      doc.setFontSize(7);
      doc.setTextColor(139,150,204);
      doc.text(dateStr, W-mg, 22, {align:'right'});

      const total  = QUESTIONS.length;
      const pct    = Math.round((good/total)*100);
      const passed = pct >= 80;
      const cy = 44, cr = 11;
      doc.setFillColor(21,29,82);
      doc.circle(W/2, cy, cr, 'F');
      doc.setDrawColor(passed?52:248, passed?211:113, passed?153:113);
      doc.setLineWidth(1.5);
      doc.circle(W/2, cy, cr, 'S');
      doc.setFont('helvetica','bold');
      doc.setFontSize(15);
      doc.setTextColor(232,236,255);
      doc.text(pct+'%', W/2, cy+3, {align:'center'});

      let y = cy + cr + 5;
      doc.setFontSize(8.5);
      doc.setTextColor(passed?52:248, passed?211:113, passed?153:113);
      doc.text(passed ? 'Quiz passed' : 'Target not reached', W/2, y, {align:'center'});
      y += 5;
      doc.setFont('helvetica','normal');
      doc.setFontSize(7);
      doc.setTextColor(139,150,204);
      doc.text('Correct: '+good+'   Incorrect: '+bad+'   Total: '+total, W/2, y, {align:'center'});
      y += 8;

      doc.setFillColor(21,29,82);
      doc.roundedRect(mg, y, col, 6, 1.5, 1.5, 'F');
      doc.setFont('helvetica','bold');
      doc.setFontSize(6.5);
      doc.setTextColor(45,212,191);
      doc.text('RESULTS BY CORE COMPETENCY', mg+3, y+4);
      y += 8.5;

      CORE.forEach(core => {
        const tot = coreTotals[core]||0;
        const ok  = coreGoods[core]||0;
        const p   = tot ? Math.round((ok/tot)*100) : 0;
        const okC = p >= 80;
        doc.setFont('helvetica','normal');
        doc.setFontSize(6.5);
        doc.setTextColor(139,150,204);
        doc.text(core, mg, y);
        const barY = y + 3;
        doc.setFillColor(30,38,90);
        doc.roundedRect(mg, barY, col-14, 2.8, 1.4, 1.4, 'F');
        const fw = (p/100)*(col-14);
        doc.setFillColor(okC?52:248, okC?211:160, okC?153:36);
        if(fw>0) doc.roundedRect(mg, barY, fw, 2.8, 1.4, 1.4, 'F');
        doc.setFont('helvetica','bold');
        doc.setFontSize(6.5);
        doc.setTextColor(okC?52:251, okC?211:191, okC?153:36);
        doc.text(p+'%', W-mg, barY+2, {align:'right'});
        y = barY + 6.2;
      });
      y += 3;

      doc.setFillColor(21,29,82);
      doc.roundedRect(mg, y, col, 6, 1.5, 1.5, 'F');
      doc.setFont('helvetica','bold');
      doc.setFontSize(6.5);
      doc.setTextColor(45,212,191);
      doc.text('SUMMARY', mg+3, y+4);
      y += 9;

      const stats = CORE.map(c=>({
        c, pct:(coreTotals[c]||0)?((coreGoods[c]||0)/(coreTotals[c]||1)*100):0
      })).sort((a,b)=>b.pct-a.pct);
      const strengths = stats.filter(x=>x.pct>=80);
      const toImprove = stats.filter(x=>x.pct<80).sort((a,b)=>a.pct-b.pct);

      doc.setFont('helvetica','bold');
      doc.setFontSize(7);
      doc.setTextColor(232,236,255);
      doc.text('Strengths (>= 80%):', mg, y);
      y += 4.5;
      if(strengths.length){
        strengths.forEach(x=>{
          doc.setFont('helvetica','normal');
          doc.setFontSize(6.5);
          doc.setTextColor(52,211,153);
          const txt = doc.splitTextToSize('+ '+x.c+' ('+Math.round(x.pct)+'%)', col-4);
          doc.text(txt, mg+2, y);
          y += txt.length * 4;
        });
      } else {
        doc.setFont('helvetica','italic');
        doc.setFontSize(6.5);
        doc.setTextColor(139,150,204);
        doc.text('None >= 80% yet', mg+2, y);
        y += 4;
      }
      y += 3;

      doc.setFont('helvetica','bold');
      doc.setFontSize(7);
      doc.setTextColor(232,236,255);
      doc.text('To strengthen (< 80%):', mg, y);
      y += 4.5;
      if(toImprove.length){
        toImprove.forEach(x=>{
          doc.setFont('helvetica','normal');
          doc.setFontSize(6.5);
          doc.setTextColor(248,113,113);
          const txt = doc.splitTextToSize('- '+x.c+' ('+Math.round(x.pct)+'%)', col-4);
          doc.text(txt, mg+2, y);
          y += txt.length * 4;
        });
      } else {
        doc.setFont('helvetica','italic');
        doc.setFontSize(6.5);
        doc.setTextColor(139,150,204);
        doc.text('All >= 80%!', mg+2, y);
        y += 4;
      }
      y += 4;

      doc.setFont('helvetica','italic');
      doc.setFontSize(6.5);
      doc.setTextColor(100,110,160);
      const tip = doc.splitTextToSize('Tip: keep practising until all core competencies stay consistently >= 80%.', col);
      doc.text(tip, mg, y);

      doc.setFillColor(17,26,77);
      doc.rect(0,H-9,W,9,'F');
      doc.setFont('helvetica','normal');
      doc.setFontSize(6);
      doc.setTextColor(80,95,150);
      doc.text('Created by Tito Bertasi  |  linkedin.com/in/titobertasi1980', W/2, H-3.5, {align:'center'});

      doc.save('ICF_Core_Competencies_Quiz_Results.pdf');
    }
    // ‚îÄ‚îÄ RESTART ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function restart(){
      welcome   = true;
      QUESTIONS = makeQuestions();
      idx = 0; good = 0; bad = 0; answered = 0; locked = false;
      initCoreStats();
      modal.classList.remove('show');
      updateHUD();
      renderQuestion();
    }

    // ‚îÄ‚îÄ EVENTS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    nextBtn.addEventListener('click', () => {
      if(welcome) return;
      if(idx < QUESTIONS.length - 1){ idx++; renderQuestion(); }
      else finish();
    });

    finishBtn.addEventListener('click', finish);
    $('restartBtn').addEventListener('click', restart);
    $('pdfBtn').addEventListener('click', downloadPDF);
    $('closeBtn').addEventListener('click', () => {
      try { window.close(); } catch(e){}
      window.location.href = 'about:blank';
    });

    // ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    welcome   = true;
    QUESTIONS = makeQuestions();
    idx = 0; good = 0; bad = 0; answered = 0; locked = false;
    initCoreStats();
    updateHUD();
    renderQuestion();

  })();
  </script>
</body>
</html>
